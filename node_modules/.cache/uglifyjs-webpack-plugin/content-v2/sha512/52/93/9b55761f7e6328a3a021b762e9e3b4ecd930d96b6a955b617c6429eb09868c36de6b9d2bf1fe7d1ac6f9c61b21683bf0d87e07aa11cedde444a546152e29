{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{\"1t1w\":function(l,n,e){\"use strict\";var t=e(\"CcnG\"),i=e(\"oBZk\"),o=e(\"ZZ/e\"),u=e(\"Ip0R\");e(\"46K1\"),e(\"qyVB\"),e(\"qNh5\"),e(\"TpLW\"),e(\"Rt4g\"),e(\"B6Tt\"),e.d(n,\"a\",function(){return a}),e.d(n,\"b\",function(){return V});var a=t.Pa({encapsulation:0,styles:[[\".text-video[_ngcontent-%COMP%]{margin-left:1em}.video-date[_ngcontent-%COMP%]{text-align:right}ion-item.video-seen[_ngcontent-%COMP%]{background:var(--fg-item-seen)}ion-item.video-unseen[_ngcontent-%COMP%], ion-item.video-unseen[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:var(--fg-item-unseen)}h3[_ngcontent-%COMP%]{font-weight:700}\"]],data:{}});function r(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,3,\"ion-button\",[[\"slot\",\"end\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.addPlaylistModal(l.parent.context.$implicit)&&t),t},i.Ga,i.v)),t.Qa(1,49152,null,0,o.Ya,[t.i,t.l],null,null),(l()(),t.Ra(2,0,null,0,1,\"ion-icon\",[[\"name\",\"add-circle\"]],null,null,null,i.Ua,i.J)),t.Qa(3,49152,null,0,o.qb,[t.i,t.l],{name:[0,\"name\"]},null)],function(l,n){l(n,3,0,\"add-circle\")},null)}function c(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,3,\"ion-button\",[[\"slot\",\"end\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.actionVideo(l.parent.context.$implicit)&&t),t},i.Ga,i.v)),t.Qa(1,49152,null,0,o.Ya,[t.i,t.l],null,null),(l()(),t.Ra(2,0,null,0,1,\"ion-icon\",[[\"name\",\"cog\"]],null,null,null,i.Ua,i.J)),t.Qa(3,49152,null,0,o.qb,[t.i,t.l],{name:[0,\"name\"]},null)],function(l,n){l(n,3,0,\"cog\")},null)}function s(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,22,\"ion-item\",[[\"lines\",\"inset\"]],null,null,null,i.O,i.d)),t.Qa(1,278528,null,0,u.i,[t.u,t.v,t.l,t.F],{ngClass:[0,\"ngClass\"]},null),t.Qa(2,49152,null,0,o.o,[t.i,t.l],{color:[0,\"color\"],lines:[1,\"lines\"]},null),(l()(),t.Ra(3,0,null,0,2,\"ion-thumbnail\",[[\"class\",\"clickable\"],[\"item-start\",\"\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.playVideo(l.context.$implicit)&&t),t},i.Ba,i.q)),t.Qa(4,49152,null,0,o.Ea,[t.i,t.l],null,null),(l()(),t.Ra(5,0,null,0,0,\"img\",[[\"class\",\"image-video\"]],[[8,\"src\",4]],null,null,null,null)),(l()(),t.Ra(6,0,null,0,12,\"ion-label\",[[\"class\",\"text-video clickable\"],[\"text-wrap\",\"\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.playVideo(l.context.$implicit)&&t),t},i.P,i.e)),t.Qa(7,49152,null,0,o.u,[t.i,t.l],null,null),(l()(),t.Ra(8,0,null,0,4,\"ion-text\",[],null,null,null,i.Aa,i.p)),t.Qa(9,49152,null,0,o.Ca,[t.i,t.l],null,null),(l()(),t.Ra(10,0,null,0,2,\"h3\",[],null,null,null,null,null)),(l()(),t.Ra(11,0,null,null,1,\"span\",[[\"class\",\"video-title\"]],null,null,null,null,null)),(l()(),t.hb(12,null,[\"\",\"\"])),(l()(),t.Ra(13,0,null,0,5,\"ion-text\",[],null,null,null,i.Aa,i.p)),t.Qa(14,49152,null,0,o.Ca,[t.i,t.l],null,null),(l()(),t.Ra(15,0,null,0,3,\"p\",[],null,null,null,null,null)),(l()(),t.Ra(16,0,null,null,2,\"span\",[[\"class\",\"video-date\"]],null,null,null,null,null)),(l()(),t.hb(17,null,[\"\",\" \",\"\"])),t.db(18,2),(l()(),t.Ja(16777216,null,0,1,null,r)),t.Qa(20,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null),(l()(),t.Ja(16777216,null,0,1,null,c)),t.Qa(22,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,1,0,!0===n.context.$implicit.seen?\"video-seen\":\"video-unseen\"),l(n,2,0,!1===n.context.$implicit.seen?\"medium\":\"light\",\"inset\"),l(n,20,0,\"admin\"==e.role||\"user\"==e.role),l(n,22,0,\"admin\"==e.role)},function(l,n){l(n,5,0,t.Ta(1,\"\",n.context.$implicit.urlImage,\"\")),l(n,12,0,n.context.$implicit.title),l(n,17,0,t.ib(n,17,0,l(n,18,0,t.bb(n.parent.parent,0),n.context.$implicit.datePublication,\"dd/MM/yyyy\")),n.context.$implicit.type)})}function d(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,2,\"ion-item\",[[\"text-wrap\",\"\"]],null,null,null,i.O,i.d)),t.Qa(1,49152,null,0,o.o,[t.i,t.l],null,null),(l()(),t.hb(-1,0,[\" No videos found. \"]))],null,null)}function p(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,6,\"div\",[],null,null,null,null,null)),(l()(),t.Ra(1,0,null,null,3,\"ion-list\",[],null,null,null,i.Q,i.f)),t.Qa(2,49152,null,0,o.v,[t.i,t.l],null,null),(l()(),t.Ja(16777216,null,0,1,null,s)),t.Qa(4,278528,null,0,u.j,[t.R,t.O,t.u],{ngForOf:[0,\"ngForOf\"]},null),(l()(),t.Ja(16777216,null,null,1,null,d)),t.Qa(6,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,4,0,e.videos),l(n,6,0,1>e.videos.length)},null)}function f(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,4,\"ion-button\",[[\"clear\",\"\"],[\"expand\",\"full\"],[\"icon-start\",\"\"],[\"small\",\"\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.addPlaylistModal(l.parent.context.$implicit)&&t),t},i.Ga,i.v)),t.Qa(1,49152,null,0,o.Ya,[t.i,t.l],{expand:[0,\"expand\"]},null),(l()(),t.Ra(2,0,null,0,1,\"ion-icon\",[[\"name\",\"add\"]],null,null,null,i.Ua,i.J)),t.Qa(3,49152,null,0,o.qb,[t.i,t.l],{name:[0,\"name\"]},null),(l()(),t.hb(-1,0,[\" Add to playlist \"]))],function(l,n){l(n,1,0,\"full\"),l(n,3,0,\"add\")},null)}function v(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,4,\"ion-button\",[[\"clear\",\"\"],[\"color\",\"dark\"],[\"expand\",\"full\"],[\"icon-start\",\"\"],[\"small\",\"\"],[\"text-right\",\"\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.removeTopVideo(l.parent.parent.context.$implicit)&&t),t},i.Ga,i.v)),t.Qa(1,49152,null,0,o.Ya,[t.i,t.l],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(l()(),t.Ra(2,0,null,0,1,\"ion-icon\",[[\"name\",\"remove\"]],null,null,null,i.Ua,i.J)),t.Qa(3,49152,null,0,o.qb,[t.i,t.l],{name:[0,\"name\"]},null),(l()(),t.hb(-1,0,[\" remove \"]))],function(l,n){l(n,1,0,\"dark\",\"full\"),l(n,3,0,\"remove\")},null)}function h(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,2,\"div\",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,v)),t.Qa(2,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){l(n,2,0,\"admin\"==n.component.role)},null)}function y(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,4,\"ion-button\",[[\"clear\",\"\"],[\"color\",\"dark\"],[\"expand\",\"full\"],[\"icon-start\",\"\"],[\"small\",\"\"],[\"text-right\",\"\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0,i=l.component;return\"click\"===n&&(t=!1!==i.removeVideoFromPlaylist(l.parent.parent.context.$implicit,i.playlist)&&t),t},i.Ga,i.v)),t.Qa(1,49152,null,0,o.Ya,[t.i,t.l],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(l()(),t.Ra(2,0,null,0,1,\"ion-icon\",[[\"name\",\"remove\"]],null,null,null,i.Ua,i.J)),t.Qa(3,49152,null,0,o.qb,[t.i,t.l],{name:[0,\"name\"]},null),(l()(),t.hb(-1,0,[\" remove \"]))],function(l,n){l(n,1,0,\"dark\",\"full\"),l(n,3,0,\"remove\")},null)}function m(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,2,\"div\",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,y)),t.Qa(2,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){l(n,2,0,\"admin\"==n.component.role)},null)}function b(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,20,\"ion-col\",[[\"size\",\"12\"],[\"size-lg\",\"4\"],[\"size-sm\",\"6\"],[\"size-xl\",\"3\"]],null,null,null,i.Oa,i.D)),t.Qa(1,49152,null,0,o.hb,[t.i,t.l],{size:[0,\"size\"]},null),(l()(),t.Ra(2,0,null,0,18,\"ion-card\",[],null,null,null,i.Ia,i.x)),t.Qa(3,49152,null,0,o.ab,[t.i,t.l],null,null),(l()(),t.Ra(4,0,null,0,0,\"img\",[[\"class\",\"clickable\"]],[[8,\"src\",4]],[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.playVideo(l.context.$implicit)&&t),t},null,null)),(l()(),t.Ra(5,0,null,0,15,\"ion-card-content\",[],null,null,null,i.Ja,i.y)),t.Qa(6,49152,null,0,o.bb,[t.i,t.l],null,null),(l()(),t.Ra(7,0,null,0,3,\"p\",[[\"class\",\"video-date\"]],null,null,null,null,null)),(l()(),t.Ra(8,0,null,null,2,\"span\",[],null,null,null,null,null)),(l()(),t.hb(9,null,[\"\",\" \",\"\"])),t.db(10,2),(l()(),t.Ra(11,0,null,0,2,\"ion-card-title\",[[\"class\",\"clickable\"]],null,[[null,\"click\"]],function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.playVideo(l.context.$implicit)&&t),t},i.Ma,i.B)),t.Qa(12,49152,null,0,o.eb,[t.i,t.l],null,null),(l()(),t.hb(13,0,[\" \",\" \"])),(l()(),t.Ra(14,0,null,0,2,\"div\",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,f)),t.Qa(16,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null),(l()(),t.Ja(16777216,null,0,1,null,h)),t.Qa(18,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null),(l()(),t.Ja(16777216,null,0,1,null,m)),t.Qa(20,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,1,0,\"12\"),l(n,16,0,\"admin\"==e.role||\"user\"==e.role),l(n,18,0,\"playlist\"!=e.display),l(n,20,0,\"playlist\"==e.display)},function(l,n){l(n,4,0,t.Ta(1,\"\",n.context.$implicit.urlImage,\"\")),l(n,9,0,n.context.$implicit.type,t.ib(n,9,1,l(n,10,0,t.bb(n.parent.parent,0),n.context.$implicit.datePublication,\"dd/MM/yyyy\"))),l(n,13,0,n.context.$implicit.title)})}function g(l){return t.jb(0,[(l()(),t.Ra(0,0,null,null,5,\"ion-grid\",[],null,null,null,i.Sa,i.H)),t.Qa(1,49152,null,0,o.ob,[t.i,t.l],null,null),(l()(),t.Ra(2,0,null,0,3,\"ion-row\",[],null,null,null,i.U,i.j)),t.Qa(3,49152,null,0,o.P,[t.i,t.l],null,null),(l()(),t.Ja(16777216,null,0,1,null,b)),t.Qa(5,278528,null,0,u.j,[t.R,t.O,t.u],{ngForOf:[0,\"ngForOf\"]},null)],function(l,n){l(n,5,0,n.component.videos)},null)}function V(l){return t.jb(0,[t.cb(0,u.d,[t.w]),(l()(),t.Ja(16777216,null,null,1,null,p)),t.Qa(2,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null),(l()(),t.Ja(16777216,null,null,1,null,g)),t.Qa(4,16384,null,0,u.k,[t.R,t.O],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,2,0,\"classic\"==e.display),l(n,4,0,\"blocks\"==e.display||\"playlist\"==e.display)},null)}},\"46K1\":function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return u}),e(\"ZZ/e\"),e(\"Rt4g\"),e(\"TpLW\"),e(\"B6Tt\"),e(\"qNh5\"),e(\"qyVB\");var t=e(\"i5gD\"),i=function(l,n,e,t){return new(e||(e=Promise))(function(i,o){function u(l){try{r(t.next(l))}catch(l){o(l)}}function a(l){try{r(t.throw(l))}catch(l){o(l)}}function r(l){l.done?i(l.value):new e(function(n){n(l.value)}).then(u,a)}r((t=t.apply(l,n||[])).next())})},o=function(l,n){var e,t,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError(\"Generator is already executing.\");for(;u;)try{if(e=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;switch(t=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,t=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(l,u)}catch(l){o=[6,l],t=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=function(){function l(l,n,e,t,i,o,u,a,r){var c=this;this.actionSheetCtrl=l,this.loadingCtrl=n,this.modalCtrl=e,this.videoService=t,this.authService=i,this.profileService=o,this.maestroService=u,this.playlistService=a,this.navCtrl=r,this.role=\"visitor\",this.display=\"classic\",this.playlist=\"\",this.profileService.getUserRole().then(function(l){c.role=l})}return l.prototype.playVideo=function(l){this.videoService.playVideo(l)},l.prototype.ngOnChanges=function(){},l.prototype.removeTopVideo=function(l){this.videoService.removeTopVideo(l),this.removeVideoFromList(l)},l.prototype.removeVideoFromPlaylist=function(l,n){this.playlistService.removeVideo(l,n),this.removeVideoFromList(l)},l.prototype.removeVideoFromList=function(l){var n=this.videos.indexOf(l);n>-1&&this.videos.splice(n,1)},l.prototype.addTopVideo=function(l){this.videoService.addTopVideo(l)},l.prototype.addPlaylistModal=function(l){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.modalCtrl.create({component:t.a,componentProps:{video:l}})];case 1:return n.sent().present(),[2]}})})},l.prototype.actionVideo=function(l){return i(this,void 0,void 0,function(){var n,e=this;return o(this,function(t){switch(t.label){case 0:return n=[{text:\"Add to playlist\",icon:\"add\",handler:function(){e.addPlaylistModal(l)}}],\"admin\"==this.role&&n.push({text:\"Add to Top videos\",icon:\"star\",handler:function(){e.videoService.addTopVideo(l)}},{text:\"Define as tango\",icon:\"settings\",handler:function(){e.videoService.setType(l,\"tango\")}},{text:\"Define as vals\",icon:\"settings\",handler:function(){e.videoService.setType(l,\"vals\")}},{text:\"Define as milonga\",icon:\"settings\",handler:function(){e.videoService.setType(l,\"milonga\")}},{text:\"Define as Lesson\",icon:\"settings\",handler:function(){e.videoService.setType(l,\"lesson\")}},{text:\"Define as other video type\",icon:\"settings\",handler:function(){e.videoService.setType(l,\"other\")}},{text:\"Delete\",icon:\"remove-circle\",handler:function(){e.removeVideoFromList(l),e.videoService.deleteVideo(l)}}),n.push({text:\"Cancel\",icon:\"\",handler:function(){}}),[4,this.actionSheetCtrl.create({header:\"Actions\",buttons:n})];case 1:return t.sent().present(),[2]}})})},l.prototype.ngOnInit=function(){},l}()},MEWS:function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return t});var t=function(){}},PpLr:function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return t});var t=function(){}},peAJ:function(l,n,e){\"use strict\";e.r(n),e.d(n,\"PlaylistPageModuleNgFactory\",function(){return v});var t=e(\"CcnG\"),i=e(\"lxt6\"),o=e(\"pMnS\"),u=e(\"d/fU\"),a=e(\"Ip0R\"),r=e(\"gIcY\"),c=e(\"ZZ/e\"),s=e(\"ZYCi\"),d=e(\"MEWS\"),p=e(\"PpLr\"),f=e(\"Izuc\"),v=t.Oa(i.a,[],function(l){return t.Ya([t.Za(512,t.k,t.Ea,[[8,[o.a,u.a]],[3,t.k],t.z]),t.Za(4608,a.m,a.l,[t.w,[2,a.v]]),t.Za(4608,r.o,r.o,[]),t.Za(4608,c.Sa,c.Sa,[t.B,t.g]),t.Za(4608,c.Ua,c.Ua,[c.Sa,t.k,t.s]),t.Za(4608,c.Va,c.Va,[c.Sa,t.k,t.s]),t.Za(1073742336,a.b,a.b,[]),t.Za(1073742336,r.m,r.m,[]),t.Za(1073742336,r.e,r.e,[]),t.Za(1073742336,c.c,c.c,[]),t.Za(1073742336,s.n,s.n,[[2,s.t],[2,s.m]]),t.Za(1073742336,d.a,d.a,[]),t.Za(1073742336,p.a,p.a,[]),t.Za(1073742336,i.a,i.a,[]),t.Za(1024,s.k,function(){return[[{path:\"\",component:f.a}]]},[])])})},qyVB:function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var t=e(\"ZZ/e\"),i=e(\"iqUP\"),o=e(\"TpLW\"),u=e(\"Rt4g\"),a=e(\"CcnG\"),r=function(){function l(l,n,e,t){this.loadingCtrl=l,this.profileService=n,this.maestroService=e,this.platform=t,this.videos=new Array,this.topVideos=[],this.allVideos=[],this.allMilongas=[],this.allVals=[],this.allOthers=[],this.allLessons=[],this.limitOffset=12}return l.prototype.launchVideo=function(l){window.open(\"https://www.youtube.com/watch?v=\"+l.youtubeId)},l.prototype.getVideos=function(l,n,e,t){var o=this;return void 0===n&&(n=\"\"),void 0===e&&(e=0),void 0===t&&(t=!1),new Promise(function(u){if(null==l)if(null==n)if(1==t)var a=i.database().ref(\"/videos\").orderByChild(\"topVideo\").equalTo(1).limitToLast(e+12);else a=i.database().ref(\"/videos\").orderByChild(\"datePublication\").limitToLast(e+12);else a=i.database().ref(\"/videos\").orderByChild(\"type\").equalTo(n).limitToLast(e+12);else a=null==n?i.database().ref(\"maestros/\"+l.key+\"/videos\").orderByChild(\"datePublication\").limitToLast(e+12):i.database().ref(\"maestros/\"+l.key+\"/videos\").orderByChild(\"type\").equalTo(n).limitToLast(e+12);var r=o.profileService.getVideosWatched();a.once(\"value\").then(function(l){var n=[];l.forEach(function(l){var e={key:l.key,id:l.child(\"id\").val(),title:l.child(\"title\").val(),youtubeId:l.child(\"youtubeId\").val(),urlImage:l.child(\"urlImage\").val(),datePublication:l.child(\"datePublication\").val(),description:l.child(\"description\").val(),importUser:l.child(\"importUser\").val(),topVideo:l.child(\"topVideo\").val(),type:l.child(\"type\").val(),valid:l.child(\"valid\").val(),dateAdd:l.child(\"dateAdd\").val(),seen:!1};r.indexOf(e.youtubeId)>-1&&(e.seen=!0),e.valid&&n.push(e)}),u(n.length>0?n.reverse():[])})})},l.prototype.loadAllVideos=function(){var l=this;return new Promise(function(n,e){i.database().ref(\"/videos\").orderByChild(\"datePublication\").once(\"value\").then(function(e){var t=[],i=[];e.forEach(function(l){var n={key:l.key,id:l.child(\"id\").val(),title:l.child(\"title\").val(),youtubeId:l.child(\"youtubeId\").val(),urlImage:l.child(\"urlImage\").val(),datePublication:l.child(\"datePublication\").val(),description:l.child(\"description\").val(),importUser:l.child(\"importUser\").val(),topVideo:l.child(\"topVideo\").val(),type:l.child(\"type\").val(),valid:l.child(\"valid\").val(),dateAdd:l.child(\"dateAdd\").val(),seen:!1};n.valid&&(t.push(n),n.topVideo&&i.push(n))}),t.length>0?(l.allVideos=t,l.topVideos=i,l.allVideos.reverse(),n(l.allVideos)):n(null)})})},l.prototype.addToVideos=function(l){this.allVideos.unshift(l)},l.prototype.setVideos=function(l){this.allVideos=l;for(var n=0,e=this.allVideos;n<e.length;n++){var t=e[n];\"milonga\"==t.type&&this.allMilongas.push(t),\"vals\"==t.type&&this.allVals.push(t),\"other\"==t.type&&this.allOthers.push(t),\"lesson\"==t.type&&this.allLessons.push(t)}},l.prototype.getAllVideos=function(){return this.allVideos},l.prototype.presentLoading=function(l){return n=this,void 0,t=function(){return function(l,n){var e,t,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError(\"Generator is already executing.\");for(;u;)try{if(e=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;switch(t=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,t=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(l,u)}catch(l){o=[6,l],t=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){switch(n.label){case 0:return[4,this.loadingCtrl.create({message:l,duration:500})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(l,i){function o(l){try{a(t.next(l))}catch(l){i(l)}}function u(l){try{a(t.throw(l))}catch(l){i(l)}}function a(n){n.done?l(n.value):new e(function(l){l(n.value)}).then(o,u)}a((t=t.apply(n,[])).next())});var n,e,t},l.prototype.getTopvideos=function(l){return this.topVideos.slice(l,l+this.limitOffset)},l.prototype.setTopVideos=function(l){this.topVideos=l},l.prototype.addTopVideo=function(l){this.presentLoading(\"Setting as a top video\"),l.topVideo=1,i.database().ref(\"/videos/\"+l.key).set(l),this.topVideos.unshift(l)},l.prototype.removeTopVideo=function(l){l.topVideo=0,i.database().ref(\"/videos/\"+l.key).set(l)},l.prototype.playVideo=function(l){l.seen=!0,this.profileService.setVideoSeen(l),window.open(\"https://www.youtube.com/watch?v=\"+l.youtubeId)},l.prototype.setType=function(l,n){var e=this;return l.type=n,this.maestroService.getMaestros().forEach(function(t){e.findVideo(l,\"maestros/\"+t.key+\"/videos\",\"setType\",n).then()}),this.findVideo(l,\"videos\",\"setType\",n).then(),!0},l.prototype.deleteVideo=function(l){var n=this;this.maestroService.getMaestros().forEach(function(e){n.findVideo(l,\"maestros/\"+e.key+\"/videos\",\"delete\",null).then()}),this.deleteGeneralVideo(l)},l.prototype.deleteGeneralVideo=function(l){i.database().ref(\"videos/\"+l.key).set(null)},l.prototype.findVideo=function(l,n,e,t){return new Promise(function(o,u){i.database().ref(n).orderByChild(\"youtubeId\").equalTo(l.youtubeId).once(\"value\").then(function(o){o.forEach(function(o){\"delete\"==e&&(l.valid=0,i.database().ref(n+\"/\"+o.key).set(l)),\"setType\"==e&&(l.type=t,i.database().ref(n+\"/\"+o.key).set(l))})})})},l.ngInjectableDef=a.V({factory:function(){return new l(a.Z(t.e),a.Z(o.a),a.Z(u.a),a.Z(t.i))},token:l,providedIn:\"root\"}),l}()}}]);","extractedComments":[]}