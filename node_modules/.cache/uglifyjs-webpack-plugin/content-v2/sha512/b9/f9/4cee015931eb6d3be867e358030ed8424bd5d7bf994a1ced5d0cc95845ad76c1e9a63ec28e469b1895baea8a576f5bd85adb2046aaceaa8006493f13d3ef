{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{OlGY:function(e,t,n){\"use strict\";n.r(t);var o=n(\"CcnG\"),l=n(\"TpLW\"),r=n(\"qNh5\"),i=n(\"Rt4g\"),a=n(\"B6Tt\"),s=n(\"qyVB\"),u=n(\"iqUP\"),c=(n(\"OO+k\"),function(e,t,n,o){return new(n||(n=Promise))(function(l,r){function i(e){try{s(o.next(e))}catch(e){r(e)}}function a(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){e.done?l(e.value):new n(function(t){t(e.value)}).then(i,a)}s((o=o.apply(e,t||[])).next())})}),d=function(e,t){var n,o,l,r,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;i;)try{if(n=1,o&&(l=2&r[0]?o.return:r[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,r[1])).done)return l;switch(o=0,l&&(r=[2&r[0],l.value]),r[0]){case 0:case 1:l=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!l||r[1]>l[0]&&r[1]<l[3])){i.label=r[1];break}if(6===r[0]&&i.label<l[1]){i.label=l[1],l=r;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(r);break}l[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=l=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},p=function(){function e(e,t,n,o,l,r,i,a){var s=this;this.MaestroService=e,this.videosService=t,this.http=n,this.profileService=o,this.authService=l,this.router=r,this.platform=i,this.playlistService=a,this.role=\"visitor\",this.resultImport=\"\",this.resultClear=\"\",this.importMaestro=\"\",this.importNumMaestro=0,this.youtubeIdList=[],this.sitemap=[],this.profileService.getUserRole().then(function(e){s.role=e}),this.videosService.setVideos([]),this.videosService.loadAllVideos().then(function(e){s.videosService.getAllVideos().forEach(function(e){s.youtubeIdList.push(e.youtubeId)})})}return e.prototype.clearVideos=function(){return c(this,void 0,void 0,function(){var e,t,n=this;return d(this,function(o){switch(o.label){case 0:return t=0,[4,this.videosService.loadAllVideos().then(function(t){e=t})];case 1:return o.sent(),e.forEach(function(o){n.resultClear=\"Traitement video \"+ ++t+\"/\"+e.length,e.forEach(function(e){o.youtubeId==e.youtubeId&&o.key!=e.key&&1!=e.topVideo&&(console.log(\"doublon \"+e.title),n.videosService.deleteVideo(e))})}),[2]}})})},e.prototype.importVideos=function(){var e=this;this.http.get(\"https://www.tango-agenda.com/web/app_dev.php/fr/imports-youtube\").subscribe(function(t){e.resultImport=\"Imports completed\"},function(t){e.resultImport=\"Imports completed\"},function(){e.resultImport=\"Imports completed\"}),this.resultImport=\"Loading ... please wait.\";var t=this.MaestroService.getMaestros();0==t.length?this.MaestroService.loadMaestros(new Date).then(function(n){e.MaestroService.setMaestros(n),e.launchImport(t=n)}):this.launchImport(t)},e.prototype.launchImport=function(e){return c(this,void 0,void 0,function(){var t,n,o,l,r,i,a,s=this;return d(this,function(u){switch(u.label){case 0:t=1,n=\"AIzaSyDjZZJFivBihtQBNWhlY3s8HTci9YJ8vw0\",o=0,l=e,u.label=1;case 1:return o<l.length?(i=(r=l[o]).surname+\" \"+r.name,r.nickname&&(i=i+\" \"+r.nickname),1==r.homonyme&&(i+=\" tango\"),a=\"https://www.googleapis.com/youtube/v3/search?key=\"+n+\"&order=date&maxResults=50&part=snippet&q=\"+i,this.importMaestro=r.surname+\" \"+r.name,this.resultImport=\"Loading ... please wait.  - \"+this.importMaestro+\" \"+t+\"/\"+e.length,[4,this.getVideoFromSearch(a,r)]):[3,4];case 2:u.sent(),t++,u.label=3;case 3:return o++,[3,1];case 4:return this.resultImport=\"Termin\\xe9 ! \",this.videosService.loadAllVideos().then(function(e){e&&s.videosService.setVideos(e),s.resultImport=\"Termin\\xe9 ! Update des videos termin\\xe9 .\"}),[2]}})})},e.prototype.getVideoFromSearch=function(e,t){var n=this;return new Promise(function(o){n.videosService.getVideos(t,null,1e7).then(function(l){var r=[];l.forEach(function(e){r.push(e.youtubeId)}),n.http.get(e,t).subscribe(function(e){e.items.forEach(function(e){var l=n.hydrateVideo(e);l.youtubeId&&(n.youtubeIdList.indexOf(l.youtubeId)>-1||null!==l.youtubeId&&\"\"!==l.youtubeId&&u.database().ref(\"videos/\").push(l).then(function(e){l.key=e.key,n.youtubeIdList.push(l.youtubeId)}),r.indexOf(l.youtubeId)>-1||(u.database().ref(\"/maestros/\"+t.key+\"/videos/\").push(l),r.unshift(l)),o(\"done\"))})},function(e){console.log(e)},function(){})})})},e.prototype.hydrateVideo=function(e){var t={};return t.title=e.snippet.title,t.youtubeId=\"\",e.id.videoId?t.youtubeId=e.id.videoId:e.videoId&&(t.youtubeId=e.videoId),t.urlImage=e.snippet.thumbnails.high.url,t.datePublication=e.snippet.publishedAt,t.description=e.snippet.description,t.importUser=\"bot\",t.topVideo=!1,t.type=\"\",t.title&&(t.title.toLowerCase().indexOf(\"vals\")>-1&&(t.type=\"vals\"),t.title.toLowerCase().indexOf(\"waltz\")>-1&&(t.type=\"vals\"),t.title.toLowerCase().indexOf(\"milonga\")>-1&&(t.type=\"milonga\"),t.title.toLowerCase().indexOf(\"workshop\")>-1&&(t.type=\"lesson\"),t.title.toLowerCase().indexOf(\"lesson\")>-1&&(t.type=\"lesson\"),t.title.toLowerCase().indexOf(\"class\")>-1&&(t.type=\"lesson\")),t.type||t.description&&(t.description.toLowerCase().indexOf(\"vals\")>-1&&(t.type=\"vals\"),t.description.toLowerCase().indexOf(\"waltz\")>-1&&(t.type=\"vals\"),t.description.toLowerCase().indexOf(\"milonga\")>-1&&(t.type=\"milonga\"),t.description.toLowerCase().indexOf(\"workshop\")>-1&&(t.type=\"lesson\"),t.description.toLowerCase().indexOf(\"lesson\")>-1&&(t.type=\"lesson\"),t.description.toLowerCase().indexOf(\"class\")>-1&&(t.type=\"lesson\")),t.valid=!0,t.dateAdd=this.formatDate(new Date),t},e.prototype.formatDate=function(e){var t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?\"\":\"0\")+t,(n>9?\"\":\"0\")+n].join(\"-\")},e.prototype.logOut=function(){this.authService.logoutUser(),this.profileService.setRole(\"visitor\"),this.router.navigateByUrl(\"login\")},e.prototype.rateTF=function(){window.open(\"https://play.google.com/store/apps/details?id=tango.fury\")},e.prototype.generateSitemap=function(){var e=[\"https://www.tangofury.com/tabs/(home:home)\",\"https://www.tangofury.com/tabs/(latest:latest)\",\"https://www.tangofury.com/tabs/(tango-maestros:tango-maestros)\"];return this.playlistService.getSelections().then(function(t){t.forEach(function(t){e.push(\"https://www.tangofury.com/tabs/(home:selection/NbtwzggJpfYmu1rN4lqdCNBBSVu1/\"+t.key+\")\")})}),this.MaestroService.getMaestros().forEach(function(t){e.push(\"https://www.tangofury.com/tabs/(tango-maestros:maestro-details/\"+t.slug+\")\")}),e},e.prototype.ngOnInit=function(){var e=this;this.sitemap=this.generateSitemap();try{document.querySelector(\"meta[name='description']\").remove()}catch(e){}var t=document.createElement(\"meta\");t.name=\"description\",t.content=\"Informations about the Tango Fury project\",document.getElementsByTagName(\"head\")[0].appendChild(t),this.inscBackAction=this.platform.backButton.subscribe(function(){e.element=document.getElementById(\"backButton\"),e.element.click()},function(e){console.log(\"\\n\\nERROR:\\n\"+e.message+\"\\n\\n\")})},e}(),h=function(){},f=n(\"pMnS\"),y=n(\"ra/t\"),m=n(\"ntG5\"),v=n(\"M9A9\"),b=n(\"ZYCi\"),g=n(\"Ip0R\"),w=n(\"CI40\"),k=n(\"fHOL\"),T=n(\"tXrQ\"),R=n(\"mrSG\"),O=n(\"F/XL\"),C=n(\"6blF\"),I=n(\"Phjn\"),S=n(\"67Y/\"),x=n(\"VnD/\"),V=function(){},E=function(){},P=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit=\"string\"==typeof e?function(){t.headers=new Map,e.split(\"\\n\").forEach(function(e){var n=e.indexOf(\":\");if(n>0){var o=e.slice(0,n),l=o.toLowerCase(),r=e.slice(n+1).trim();t.maybeSetNormalizedName(o,l),t.headers.has(l)?t.headers.get(l).push(r):t.headers.set(l,[r])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var o=e[n],l=n.toLowerCase();\"string\"==typeof o&&(o=[o]),o.length>0&&(t.headers.set(l,o),t.maybeSetNormalizedName(n,l))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:\"a\"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:\"s\"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:\"d\"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case\"a\":case\"s\":var n=e.value;if(\"string\"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var o=(\"a\"===e.op?this.headers.get(t):void 0)||[];o.push.apply(o,Object(R.g)(n)),this.headers.set(t,o);break;case\"d\":var l=e.value;if(l){var r=this.headers.get(t);if(!r)return;0===(r=r.filter(function(e){return-1===l.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,r)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),j=function(){function e(){}return e.prototype.encodeKey=function(e){return L(e)},e.prototype.encodeValue=function(e){return L(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function L(e){return encodeURIComponent(e).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/gi,\"$\").replace(/%2C/gi,\",\").replace(/%3B/gi,\";\").replace(/%2B/gi,\"+\").replace(/%3D/gi,\"=\").replace(/%3F/gi,\"?\").replace(/%2F/gi,\"/\")}var A=function(){function e(e){void 0===e&&(e={});var t,n,o,l=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new j,e.fromString){if(e.fromObject)throw new Error(\"Cannot specify both fromString and fromObject.\");this.map=(t=e.fromString,n=this.encoder,o=new Map,t.length>0&&t.split(\"&\").forEach(function(e){var t=e.indexOf(\"=\"),l=Object(R.f)(-1==t?[n.decodeKey(e),\"\"]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),r=l[0],i=l[1],a=o.get(r)||[];a.push(i),o.set(r,a)}),o)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];l.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:\"a\"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:\"s\"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:\"d\"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+\"=\"+e.encoder.encodeValue(t)}).join(\"&\")}).join(\"&\")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case\"a\":case\"s\":var n=(\"a\"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case\"d\":if(void 0===t.value){e.map.delete(t.param);break}var o=e.map.get(t.param)||[],l=o.indexOf(t.value);-1!==l&&o.splice(l,1),o.length>0?e.map.set(t.param,o):e.map.delete(t.param)}}),this.cloneFrom=null)},e}();function N(e){return\"undefined\"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Q(e){return\"undefined\"!=typeof Blob&&e instanceof Blob}function F(e){return\"undefined\"!=typeof FormData&&e instanceof FormData}var z=function(){function e(e,t,n,o){var l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType=\"json\",this.method=e.toUpperCase(),function(e){switch(e){case\"DELETE\":case\"GET\":case\"HEAD\":case\"OPTIONS\":case\"JSONP\":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==n?n:null,l=o):l=n,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.params&&(this.params=l.params)),this.headers||(this.headers=new P),this.params){var r=this.params.toString();if(0===r.length)this.urlWithParams=t;else{var i=t.indexOf(\"?\");this.urlWithParams=t+(-1===i?\"?\":i<t.length-1?\"&\":\"\")+r}}else this.params=new A,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:N(this.body)||Q(this.body)||F(this.body)||\"string\"==typeof this.body?this.body:this.body instanceof A?this.body.toString():\"object\"==typeof this.body||\"boolean\"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:F(this.body)?null:Q(this.body)?this.body.type||null:N(this.body)?null:\"string\"==typeof this.body?\"text/plain\":this.body instanceof A?\"application/x-www-form-urlencoded;charset=UTF-8\":\"object\"==typeof this.body||\"number\"==typeof this.body||Array.isArray(this.body)?\"application/json\":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,o=t.url||this.url,l=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,i=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,s=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(s=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},s)),t.setParams&&(u=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},u)),new e(n,o,r,{params:u,headers:s,reportProgress:a,responseType:l,withCredentials:i})},e}(),U=function(e){return e[e.Sent=0]=\"Sent\",e[e.UploadProgress=1]=\"UploadProgress\",e[e.ResponseHeader=2]=\"ResponseHeader\",e[e.DownloadProgress=3]=\"DownloadProgress\",e[e.Response=4]=\"Response\",e[e.User=5]=\"User\",e}({}),B=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n=\"OK\"),this.headers=e.headers||new P,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),q=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=U.ResponseHeader,n}return Object(R.c)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(B),M=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=U.Response,n.body=void 0!==t.body?t.body:null,n}return Object(R.c)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(B),Z=function(e){function t(t){var n=e.call(this,t,0,\"Unknown Error\")||this;return n.name=\"HttpErrorResponse\",n.ok=!1,n.message=n.status>=200&&n.status<300?\"Http failure during parsing for \"+(t.url||\"(unknown url)\"):\"Http failure response for \"+(t.url||\"(unknown url)\")+\": \"+t.status+\" \"+t.statusText,n.error=t.error||null,n}return Object(R.c)(t,e),t}(B);function H(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var D=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var o,l=this;if(void 0===n&&(n={}),e instanceof z)o=e;else{var r;r=n.headers instanceof P?n.headers:new P(n.headers);var i=void 0;n.params&&(i=n.params instanceof A?n.params:new A({fromObject:n.params})),o=new z(e,t,void 0!==n.body?n.body:null,{headers:r,params:i,reportProgress:n.reportProgress,responseType:n.responseType||\"json\",withCredentials:n.withCredentials})}var a=Object(O.a)(o).pipe(Object(I.a)(function(e){return l.handler.handle(e)}));if(e instanceof z||\"events\"===n.observe)return a;var s=a.pipe(Object(x.a)(function(e){return e instanceof M}));switch(n.observe||\"body\"){case\"body\":switch(o.responseType){case\"arraybuffer\":return s.pipe(Object(S.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error(\"Response is not an ArrayBuffer.\");return e.body}));case\"blob\":return s.pipe(Object(S.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error(\"Response is not a Blob.\");return e.body}));case\"text\":return s.pipe(Object(S.a)(function(e){if(null!==e.body&&\"string\"!=typeof e.body)throw new Error(\"Response is not a string.\");return e.body}));case\"json\":default:return s.pipe(Object(S.a)(function(e){return e.body}))}case\"response\":return s;default:throw new Error(\"Unreachable: unhandled observe type \"+n.observe+\"}\")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request(\"DELETE\",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request(\"GET\",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request(\"HEAD\",e,t)},e.prototype.jsonp=function(e,t){return this.request(\"JSONP\",e,{params:(new A).append(t,\"JSONP_CALLBACK\"),observe:\"body\",responseType:\"json\"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request(\"OPTIONS\",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request(\"PATCH\",e,H(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request(\"POST\",e,H(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request(\"PUT\",e,H(n,t))},e}(),J=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),G=new o.r(\"HTTP_INTERCEPTORS\"),K=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),Y=/^\\)\\]\\}',?\\n/,W=function(){},X=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),_=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if(\"JSONP\"===e.method)throw new Error(\"Attempted to construct Jsonp request without JsonpClientModule installed.\");return new C.a(function(n){var o=t.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach(function(e,t){return o.setRequestHeader(e,t.join(\",\"))}),e.headers.has(\"Accept\")||o.setRequestHeader(\"Accept\",\"application/json, text/plain, */*\"),!e.headers.has(\"Content-Type\")){var l=e.detectContentTypeHeader();null!==l&&o.setRequestHeader(\"Content-Type\",l)}if(e.responseType){var r=e.responseType.toLowerCase();o.responseType=\"json\"!==r?r:\"text\"}var i=e.serializeBody(),a=null,s=function(){if(null!==a)return a;var t=1223===o.status?204:o.status,n=o.statusText||\"OK\",l=new P(o.getAllResponseHeaders()),r=function(e){return\"responseURL\"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader(\"X-Request-URL\"):null}(o)||e.url;return a=new q({headers:l,status:t,statusText:n,url:r})},u=function(){var t=s(),l=t.headers,r=t.status,i=t.statusText,a=t.url,u=null;204!==r&&(u=void 0===o.response?o.responseText:o.response),0===r&&(r=u?200:0);var c=r>=200&&r<300;if(\"json\"===e.responseType&&\"string\"==typeof u){var d=u;u=u.replace(Y,\"\");try{u=\"\"!==u?JSON.parse(u):null}catch(e){u=d,c&&(c=!1,u={error:e,text:u})}}c?(n.next(new M({body:u,headers:l,status:r,statusText:i,url:a||void 0})),n.complete()):n.error(new Z({error:u,headers:l,status:r,statusText:i,url:a||void 0}))},c=function(e){var t=new Z({error:e,status:o.status||0,statusText:o.statusText||\"Unknown Error\"});n.error(t)},d=!1,p=function(t){d||(n.next(s()),d=!0);var l={type:U.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(l.total=t.total),\"text\"===e.responseType&&o.responseText&&(l.partialText=o.responseText),n.next(l)},h=function(e){var t={type:U.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return o.addEventListener(\"load\",u),o.addEventListener(\"error\",c),e.reportProgress&&(o.addEventListener(\"progress\",p),null!==i&&o.upload&&o.upload.addEventListener(\"progress\",h)),o.send(i),n.next({type:U.Sent}),function(){o.removeEventListener(\"error\",c),o.removeEventListener(\"load\",u),e.reportProgress&&(o.removeEventListener(\"progress\",p),null!==i&&o.upload&&o.upload.removeEventListener(\"progress\",h)),o.abort()}})},e}(),$=new o.r(\"XSRF_COOKIE_NAME\"),ee=new o.r(\"XSRF_HEADER_NAME\"),te=function(){},ne=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString=\"\",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if(\"server\"===this.platform)return null;var e=this.doc.cookie||\"\";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(g.w)(e,this.cookieName),this.lastCookieString=e),this.lastToken},Object(R.b)([Object(R.e)(0,Object(o.q)(g.c)),Object(R.e)(1,Object(o.q)(o.D)),Object(R.e)(2,Object(o.q)($))],e)}(),oe=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if(\"GET\"===e.method||\"HEAD\"===e.method||n.startsWith(\"http://\")||n.startsWith(\"https://\"))return t.handle(e);var o=this.tokenService.getToken();return null===o||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,o)})),t.handle(e)},Object(R.b)([Object(R.e)(1,Object(o.q)(ee))],e)}(),le=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(G,[]);this.chain=t.reduceRight(function(e,t){return new J(e,t)},this.backend)}return this.chain.handle(e)},e}(),re=function(){function e(){}var t;return t=e,e.disable=function(){return{ngModule:t,providers:[{provide:oe,useClass:K}]}},e.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:$,useValue:e.cookieName}:[],e.headerName?{provide:ee,useValue:e.headerName}:[]]}},e}(),ie=function(){},ae=n(\"YxxD\"),se=o.Pa({encapsulation:0,styles:[[\"\"]],data:{}});function ue(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,15,\"ion-card\",[],null,null,null,y.T,y.f)),o.Qa(1,49152,null,0,m.h,[o.l],null,null),(e()(),o.Ra(2,0,null,0,4,\"ion-card-header\",[[\"class\",\"card-menu\"]],null,null,null,y.Q,y.h)),o.Qa(3,49152,null,0,m.j,[o.l],null,null),(e()(),o.Ra(4,0,null,0,1,\"ion-icon\",[[\"name\",\"settings\"]],null,null,null,y.Ca,y.s)),o.Qa(5,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,0,[\" Parameters \"])),(e()(),o.Ra(7,0,null,0,8,\"ion-card-content\",[],null,null,null,y.P,y.g)),o.Qa(8,49152,null,0,m.i,[o.l],null,null),(e()(),o.Ra(9,0,null,0,1,\"p\",[],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"Lougout from Tango Fury ?\"])),(e()(),o.Ra(11,0,null,0,4,\"p\",[[\"class\",\"center\"]],null,null,null,null,null)),(e()(),o.Ra(12,0,null,null,3,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var l=!0,r=e.component;return\"click\"===t&&(l=!1!==o.bb(e,14).onClick(n)&&l),\"click\"===t&&(l=!1!==r.logOut()&&l),l},y.N,y.d)),o.Qa(13,49152,null,0,m.f,[o.l],null,null),o.Qa(14,16384,null,0,v.a,[[2,b.l],o.l],null,null),(e()(),o.gb(-1,0,[\" Logout \"]))],function(e,t){e(t,5,0,\"settings\")},null)}function ce(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,23,\"ion-card\",[],null,null,null,y.T,y.f)),o.Qa(1,49152,null,0,m.h,[o.l],null,null),(e()(),o.Ra(2,0,null,0,4,\"ion-card-header\",[[\"class\",\"card-menu\"]],null,null,null,y.Q,y.h)),o.Qa(3,49152,null,0,m.j,[o.l],null,null),(e()(),o.Ra(4,0,null,0,1,\"ion-icon\",[[\"name\",\"sync\"]],null,null,null,y.Ca,y.s)),o.Qa(5,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,0,[\" Administration \"])),(e()(),o.Ra(7,0,null,0,16,\"ion-card-content\",[],null,null,null,y.P,y.g)),o.Qa(8,49152,null,0,m.i,[o.l],null,null),(e()(),o.Ra(9,0,null,0,6,\"p\",[[\"class\",\"center\"]],null,null,null,null,null)),(e()(),o.Ra(10,0,null,null,3,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var l=!0,r=e.component;return\"click\"===t&&(l=!1!==o.bb(e,12).onClick(n)&&l),\"click\"===t&&(l=!1!==r.importVideos()&&l),l},y.N,y.d)),o.Qa(11,49152,null,0,m.f,[o.l],null,null),o.Qa(12,16384,null,0,v.a,[[2,b.l],o.l],null,null),(e()(),o.gb(-1,0,[\" Import \"])),(e()(),o.Ra(14,0,null,null,1,\"strong\",[],null,null,null,null,null)),(e()(),o.gb(15,null,[\"\",\"\"])),(e()(),o.Ra(16,0,null,0,0,\"hr\",[],null,null,null,null,null)),(e()(),o.Ra(17,0,null,0,6,\"p\",[[\"class\",\"center\"]],null,null,null,null,null)),(e()(),o.Ra(18,0,null,null,3,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var l=!0,r=e.component;return\"click\"===t&&(l=!1!==o.bb(e,20).onClick(n)&&l),\"click\"===t&&(l=!1!==r.clearVideos()&&l),l},y.N,y.d)),o.Qa(19,49152,null,0,m.f,[o.l],null,null),o.Qa(20,16384,null,0,v.a,[[2,b.l],o.l],null,null),(e()(),o.gb(-1,0,[\" Clear multiple items \"])),(e()(),o.Ra(22,0,null,null,1,\"strong\",[],null,null,null,null,null)),(e()(),o.gb(23,null,[\"\",\"\"]))],function(e,t){e(t,5,0,\"sync\")},function(e,t){var n=t.component;e(t,15,0,n.resultImport),e(t,23,0,n.resultClear)})}function de(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,1,\"p\",[],null,null,null,null,null)),(e()(),o.gb(1,null,[\" \",\" \"]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function pe(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,10,\"ion-card\",[],null,null,null,y.T,y.f)),o.Qa(1,49152,null,0,m.h,[o.l],null,null),(e()(),o.Ra(2,0,null,0,4,\"ion-card-header\",[[\"class\",\"card-menu\"]],null,null,null,y.Q,y.h)),o.Qa(3,49152,null,0,m.j,[o.l],null,null),(e()(),o.Ra(4,0,null,0,1,\"ion-icon\",[[\"name\",\"world\"]],null,null,null,y.Ca,y.s)),o.Qa(5,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,0,[\" Sitemap \"])),(e()(),o.Ra(7,0,null,0,3,\"ion-card-content\",[],null,null,null,y.P,y.g)),o.Qa(8,49152,null,0,m.i,[o.l],null,null),(e()(),o.Ja(16777216,null,0,1,null,de)),o.Qa(10,278528,null,0,g.j,[o.R,o.O,o.u],{ngForOf:[0,\"ngForOf\"]},null)],function(e,t){var n=t.component;e(t,5,0,\"world\"),e(t,10,0,n.sitemap)},null)}function he(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,11,\"ion-header\",[],null,null,null,y.Aa,y.q)),o.Qa(1,49152,null,0,m.y,[o.l],null,null),(e()(),o.Ra(2,0,null,0,9,\"ion-toolbar\",[[\"color\",\"dark\"]],null,null,null,y.Ta,y.I)),o.Qa(3,49152,null,0,m.Xa,[o.l],{color:[0,\"color\"]},null),(e()(),o.Ra(4,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,y.O,y.e)),o.Qa(5,49152,null,0,m.g,[],null,null),(e()(),o.Ra(6,0,null,0,2,\"ion-back-button\",[[\"defaultHref\",\"/\"],[\"id\",\"backButton\"]],null,[[null,\"click\"]],function(e,t,n){var l=!0;return\"click\"===t&&(l=!1!==o.bb(e,8).onClick(n)&&l),l},y.L,y.b)),o.Qa(7,49152,null,0,m.c,[o.l],{defaultHref:[0,\"defaultHref\"]},null),o.Qa(8,16384,null,0,w.a,[[2,b.l],[2,k.a],T.a,o.l],{defaultHref:[0,\"defaultHref\"]},null),(e()(),o.Ra(9,0,null,0,2,\"ion-title\",[[\"class\",\"center\"]],null,null,null,y.Sa,y.J)),o.Qa(10,49152,null,0,m.Ya,[o.l],null,null),(e()(),o.gb(-1,0,[\"About\"])),(e()(),o.Ra(12,0,null,null,44,\"ion-content\",[[\"class\",\"fg-content\"],[\"padding\",\"\"]],null,null,null,y.W,y.m)),o.Qa(13,49152,null,0,m.r,[o.l],null,null),(e()(),o.Ra(14,0,null,0,1,\"h1\",[],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"About Tango Fury\"])),(e()(),o.Ra(16,0,null,0,18,\"ion-card\",[],null,null,null,y.T,y.f)),o.Qa(17,49152,null,0,m.h,[o.l],null,null),(e()(),o.Ra(18,0,null,0,4,\"ion-card-header\",[[\"class\",\"card-menu\"]],null,null,null,y.Q,y.h)),o.Qa(19,49152,null,0,m.j,[o.l],null,null),(e()(),o.Ra(20,0,null,0,1,\"ion-icon\",[[\"name\",\"heart\"]],null,null,null,y.Ca,y.s)),o.Qa(21,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,0,[\" Do you like Tango Fury ? \"])),(e()(),o.Ra(23,0,null,0,11,\"ion-card-content\",[],null,null,null,y.P,y.g)),o.Qa(24,49152,null,0,m.i,[o.l],null,null),(e()(),o.Ra(25,0,null,0,4,\"p\",[],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"Give some \"])),(e()(),o.Ra(27,0,null,null,1,\"ion-icon\",[[\"name\",\"star\"]],null,null,null,y.Ca,y.s)),o.Qa(28,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,null,[\" to Tango Fury on the Google Play Store ! :) \"])),(e()(),o.Ra(30,0,null,0,4,\"p\",[[\"class\",\"center\"]],null,null,null,null,null)),(e()(),o.Ra(31,0,null,null,3,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var l=!0,r=e.component;return\"click\"===t&&(l=!1!==o.bb(e,33).onClick(n)&&l),\"click\"===t&&(l=!1!==r.rateTF()&&l),l},y.N,y.d)),o.Qa(32,49152,null,0,m.f,[o.l],null,null),o.Qa(33,16384,null,0,v.a,[[2,b.l],o.l],null,null),(e()(),o.gb(-1,0,[\" Rate Tango Fury \"])),(e()(),o.Ra(35,0,null,0,15,\"ion-card\",[],null,null,null,y.T,y.f)),o.Qa(36,49152,null,0,m.h,[o.l],null,null),(e()(),o.Ra(37,0,null,0,4,\"ion-card-header\",[[\"class\",\"card-menu\"]],null,null,null,y.Q,y.h)),o.Qa(38,49152,null,0,m.j,[o.l],null,null),(e()(),o.Ra(39,0,null,0,1,\"ion-icon\",[[\"name\",\"information-circle\"]],null,null,null,y.Ca,y.s)),o.Qa(40,49152,null,0,m.A,[o.l],{name:[0,\"name\"]},null),(e()(),o.gb(-1,0,[\" About \"])),(e()(),o.Ra(42,0,null,0,8,\"ion-card-content\",[],null,null,null,y.P,y.g)),o.Qa(43,49152,null,0,m.i,[o.l],null,null),(e()(),o.Ra(44,0,null,0,4,\"p\",[],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"This app has been backed with love by Fabien Grignoux. If you have any comment or suggestion please email me at fab.grignoux@gmail.com or join me on \"])),(e()(),o.Ra(46,0,null,null,1,\"a\",[[\"href\",\"https://www.facebook.com/fabien.grignoux\"]],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"Facebook\"])),(e()(),o.gb(-1,null,[\".\"])),(e()(),o.Ra(49,0,null,0,1,\"p\",[],null,null,null,null,null)),(e()(),o.gb(-1,null,[\"Hope to see you on the dancefloor ! :)\"])),(e()(),o.Ja(16777216,null,0,1,null,ue)),o.Qa(52,16384,null,0,g.k,[o.R,o.O],{ngIf:[0,\"ngIf\"]},null),(e()(),o.Ja(16777216,null,0,1,null,ce)),o.Qa(54,16384,null,0,g.k,[o.R,o.O],{ngIf:[0,\"ngIf\"]},null),(e()(),o.Ja(16777216,null,0,1,null,pe)),o.Qa(56,16384,null,0,g.k,[o.R,o.O],{ngIf:[0,\"ngIf\"]},null)],function(e,t){var n=t.component;e(t,3,0,\"dark\"),e(t,7,0,\"/\"),e(t,8,0,\"/\"),e(t,21,0,\"heart\"),e(t,28,0,\"star\"),e(t,40,0,\"information-circle\"),e(t,52,0,\"visitor\"!=n.role),e(t,54,0,\"admin\"==n.role),e(t,56,0,\"admin\"==n.role)},null)}var fe=o.Na(\"app-about\",p,function(e){return o.ib(0,[(e()(),o.Ra(0,0,null,null,1,\"app-about\",[],null,null,null,he,se)),o.Qa(1,114688,null,0,p,[i.a,s.a,D,l.a,r.a,b.l,ae.a,a.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),ye=n(\"gIcY\"),me=n(\"95zI\"),ve=n(\"9opb\"),be=n(\"apKv\"),ge=n(\"B4/3\");n.d(t,\"AboutPageModuleNgFactory\",function(){return we});var we=o.Oa(h,[],function(e){return o.Ya([o.Za(512,o.k,o.Ea,[[8,[f.a,fe]],[3,o.k],o.z]),o.Za(4608,g.m,g.l,[o.w,[2,g.v]]),o.Za(4608,ye.o,ye.o,[]),o.Za(4608,me.a,me.a,[o.B,o.g]),o.Za(4608,ve.a,ve.a,[me.a,o.k,o.s]),o.Za(4608,be.a,be.a,[me.a,o.k,o.s]),o.Za(4608,te,ne,[g.c,o.D,$]),o.Za(4608,oe,oe,[te,ee]),o.Za(5120,G,function(e){return[e]},[oe]),o.Za(4608,X,X,[]),o.Za(6144,W,null,[X]),o.Za(4608,_,_,[W]),o.Za(6144,E,null,[_]),o.Za(4608,V,le,[E,o.s]),o.Za(4608,D,D,[V]),o.Za(1073742336,g.b,g.b,[]),o.Za(1073742336,ye.m,ye.m,[]),o.Za(1073742336,ye.e,ye.e,[]),o.Za(1073742336,ge.a,ge.a,[]),o.Za(1073742336,re,re,[]),o.Za(1073742336,ie,ie,[]),o.Za(1073742336,b.m,b.m,[[2,b.s],[2,b.l]]),o.Za(1073742336,h,h,[]),o.Za(256,$,\"XSRF-TOKEN\",[]),o.Za(256,ee,\"X-XSRF-TOKEN\",[]),o.Za(1024,b.j,function(){return[[{path:\"\",component:p}]]},[])])})},qyVB:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return u}),n(\"OO+k\");var o=n(\"iqUP\"),l=n(\"TpLW\"),r=n(\"Rt4g\"),i=n(\"CcnG\"),a=n(\"Eq7r\"),s=n(\"YxxD\"),u=function(){function e(e,t,n,o){this.loadingCtrl=e,this.profileService=t,this.maestroService=n,this.platform=o,this.videos=new Array,this.topVideos=[],this.allVideos=[],this.allMilongas=[],this.allVals=[],this.allOthers=[],this.allLessons=[],this.limitOffset=12}return e.prototype.launchVideo=function(e){window.open(\"https://www.youtube.com/watch?v=\"+e.youtubeId)},e.prototype.getVideos=function(e,t,n,l){var r=this;return void 0===t&&(t=\"\"),void 0===n&&(n=0),void 0===l&&(l=!1),new Promise(function(i){if(null==e)if(null==t)if(1==l)var a=o.database().ref(\"/videos\").orderByChild(\"topVideo\").equalTo(1).limitToLast(n+12);else a=o.database().ref(\"/videos\").orderByChild(\"datePublication\").limitToLast(n+12);else a=o.database().ref(\"/videos\").orderByChild(\"type\").equalTo(t).limitToLast(n+12);else a=null==t?o.database().ref(\"maestros/\"+e.key+\"/videos\").orderByChild(\"datePublication\").limitToLast(n+12):o.database().ref(\"maestros/\"+e.key+\"/videos\").orderByChild(\"type\").equalTo(t).limitToLast(n+12);var s=r.profileService.getVideosWatched();a.once(\"value\").then(function(e){var t=[];e.forEach(function(e){var n={key:e.key,id:e.child(\"id\").val(),title:e.child(\"title\").val(),youtubeId:e.child(\"youtubeId\").val(),urlImage:e.child(\"urlImage\").val(),datePublication:e.child(\"datePublication\").val(),description:e.child(\"description\").val(),importUser:e.child(\"importUser\").val(),topVideo:e.child(\"topVideo\").val(),type:e.child(\"type\").val(),valid:e.child(\"valid\").val(),dateAdd:e.child(\"dateAdd\").val(),seen:!1};s.indexOf(n.youtubeId)>-1&&(n.seen=!0),n.valid&&t.push(n)}),i(t.length>0?t.reverse():[])})})},e.prototype.loadAllVideos=function(){var e=this;return new Promise(function(t,n){o.database().ref(\"/videos\").orderByChild(\"datePublication\").once(\"value\").then(function(n){var o=[],l=[];n.forEach(function(e){var t={key:e.key,id:e.child(\"id\").val(),title:e.child(\"title\").val(),youtubeId:e.child(\"youtubeId\").val(),urlImage:e.child(\"urlImage\").val(),datePublication:e.child(\"datePublication\").val(),description:e.child(\"description\").val(),importUser:e.child(\"importUser\").val(),topVideo:e.child(\"topVideo\").val(),type:e.child(\"type\").val(),valid:e.child(\"valid\").val(),dateAdd:e.child(\"dateAdd\").val(),seen:!1};t.valid&&(o.push(t),t.topVideo&&l.push(t))}),o.length>0?(e.allVideos=o,e.topVideos=l,e.allVideos.reverse(),t(e.allVideos)):t(null)})})},e.prototype.addToVideos=function(e){this.allVideos.unshift(e)},e.prototype.setVideos=function(e){this.allVideos=e;for(var t=0,n=this.allVideos;t<n.length;t++){var o=n[t];\"milonga\"==o.type&&this.allMilongas.push(o),\"vals\"==o.type&&this.allVals.push(o),\"other\"==o.type&&this.allOthers.push(o),\"lesson\"==o.type&&this.allLessons.push(o)}},e.prototype.getAllVideos=function(){return this.allVideos},e.prototype.presentLoading=function(e){return t=this,void 0,o=function(){return function(e,t){var n,o,l,r,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;i;)try{if(n=1,o&&(l=2&r[0]?o.return:r[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,r[1])).done)return l;switch(o=0,l&&(r=[2&r[0],l.value]),r[0]){case 0:case 1:l=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!l||r[1]>l[0]&&r[1]<l[3])){i.label=r[1];break}if(6===r[0]&&i.label<l[1]){i.label=l[1],l=r;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(r);break}l[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=l=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(t){switch(t.label){case 0:return[4,this.loadingCtrl.create({message:e,duration:500})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,l){function r(e){try{a(o.next(e))}catch(e){l(e)}}function i(e){try{a(o.throw(e))}catch(e){l(e)}}function a(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(r,i)}a((o=o.apply(t,[])).next())});var t,n,o},e.prototype.getTopvideos=function(e){return this.topVideos.slice(e,e+this.limitOffset)},e.prototype.setTopVideos=function(e){this.topVideos=e},e.prototype.addTopVideo=function(e){this.presentLoading(\"Setting as a top video\"),e.topVideo=1,o.database().ref(\"/videos/\"+e.key).set(e),this.topVideos.unshift(e)},e.prototype.removeTopVideo=function(e){e.topVideo=0,o.database().ref(\"/videos/\"+e.key).set(e)},e.prototype.playVideo=function(e){e.seen=!0,this.profileService.setVideoSeen(e),window.open(\"https://www.youtube.com/watch?v=\"+e.youtubeId)},e.prototype.setType=function(e,t){var n=this;return e.type=t,this.maestroService.getMaestros().forEach(function(o){n.findVideo(e,\"maestros/\"+o.key+\"/videos\",\"setType\",t).then()}),this.findVideo(e,\"videos\",\"setType\",t).then(),!0},e.prototype.deleteVideo=function(e){var t=this;this.maestroService.getMaestros().forEach(function(n){t.findVideo(e,\"maestros/\"+n.key+\"/videos\",\"delete\",null).then()}),this.deleteGeneralVideo(e)},e.prototype.deleteGeneralVideo=function(e){o.database().ref(\"videos/\"+e.key).set(null),console.log(\"deleting video \"+e.title)},e.prototype.findVideo=function(e,t,n,l){return new Promise(function(r,i){o.database().ref(t).orderByChild(\"youtubeId\").equalTo(e.youtubeId).once(\"value\").then(function(r){r.forEach(function(r){\"delete\"==n&&(e.valid=0,o.database().ref(t+\"/\"+r.key).set(e),console.log(\"deleting \"+e.title)),\"setType\"==n&&(e.type=l,o.database().ref(t+\"/\"+r.key).set(e))})})})},e.ngInjectableDef=i.V({factory:function(){return new e(i.Z(a.a),i.Z(l.a),i.Z(r.a),i.Z(s.a))},token:e,providedIn:\"root\"}),e}()}}]);","extractedComments":[]}