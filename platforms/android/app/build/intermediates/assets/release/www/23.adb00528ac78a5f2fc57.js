(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{OlGY:function(l,e,n){"use strict";n.r(e);var t=n("8Y7J"),u=n("TpLW"),o=n("qNh5"),i=n("Rt4g"),s=n("B6Tt"),a=n("qyVB"),r=n("iqUP"),d=n("ZZ/e"),c=function(l,e,n,t){return new(n||(n=Promise))(function(u,o){function i(l){try{a(t.next(l))}catch(e){o(e)}}function s(l){try{a(t.throw(l))}catch(e){o(e)}}function a(l){l.done?u(l.value):new n(function(e){e(l.value)}).then(i,s)}a((t=t.apply(l,e||[])).next())})};class h{constructor(l,e,n,t,u,o,i,s){this.MaestroService=l,this.videosService=e,this.http=n,this.profileService=t,this.authService=u,this.router=o,this.platform=i,this.playlistService=s,this.role="visitor",this.resultImport="",this.resultClear="",this.importMaestro="",this.importNumMaestro=0,this.youtubeIdList=[],this.sitemap=[],this.role=this.profileService.returnRole(),this.videosService.setVideos([]),this.videosService.loadAllVideos().then(l=>{this.videosService.getAllVideos().forEach(l=>{this.youtubeIdList.push(l.youtubeId)})})}clearVideos(){return c(this,void 0,void 0,function*(){let l,e=0;yield this.videosService.loadAllVideos().then(e=>{l=e}),l.forEach(n=>{this.resultClear="Traitement video "+ ++e+"/"+l.length,l.forEach(l=>{n.youtubeId==l.youtubeId&&n.key!=l.key&&1!=l.topVideo&&this.videosService.deleteVideo(l)})})})}importVideos(){this.resultImport="Loading ... please wait.";var l=this.MaestroService.getMaestros();0==l.length?this.MaestroService.loadMaestros(new Date).then(e=>{this.MaestroService.setMaestros(e),this.launchImport(l=e)}):this.launchImport(l)}launchImport(l){return c(this,void 0,void 0,function*(){var e,n=1;for(var t of(e=yield this.videosService.getDeletedVideos(),l)){var u=t.surname+" "+t.name;t.nickname&&(u=u+" "+t.nickname),1==t.homonyme&&(u+=" tango");var o="https://www.googleapis.com/youtube/v3/search?key=AIzaSyDjZZJFivBihtQBNWhlY3s8HTci9YJ8vw0&order=date&maxResults=50&part=snippet&q="+u;this.importMaestro=t.surname+" "+t.name,this.resultImport="Loading ... please wait.  - "+this.importMaestro+" "+n+"/"+l.length,yield this.getVideoFromSearch(o,t,e),n++}this.resultImport="Termin\xe9 ! ",this.videosService.loadAllVideos().then(l=>{l&&this.videosService.setVideos(l),this.resultImport="Termin\xe9 ! Update des videos termin\xe9 ."})})}getVideoFromSearch(l,e,n){return new Promise(t=>{this.videosService.getVideos(e,null,1e7).then(u=>{var o=[];u.forEach(l=>{o.push(l.youtubeId)}),this.http.get(l,e).subscribe(l=>{l.items.forEach(l=>{var u=this.hydrateVideo(l);n.indexOf(u.youtubeId)>-1||(u.youtubeId&&(this.youtubeIdList.indexOf(u.youtubeId)>-1||null!==u.youtubeId&&""!==u.youtubeId&&r.database().ref("videos/").push(u).then(l=>{u.key=l.key,this.youtubeIdList.push(u.youtubeId)}),o.indexOf(u.youtubeId)>-1||(r.database().ref(`/maestros/${e.key}/videos/`).push(u),o.unshift(u))),t("done"))})},l=>{console.log(l)},()=>{})})})}hydrateVideo(l){var e={};return e.title=l.snippet.title,e.youtubeId="",l.id.videoId?e.youtubeId=l.id.videoId:l.videoId&&(e.youtubeId=l.videoId),e.urlImage=l.snippet.thumbnails.high.url,e.datePublication=l.snippet.publishedAt,e.description=l.snippet.description,e.importUser="bot",e.topVideo=!1,e.type="",e.title&&(e.title.toLowerCase().indexOf("vals")>-1&&(e.type="vals"),e.title.toLowerCase().indexOf("waltz")>-1&&(e.type="vals"),e.title.toLowerCase().indexOf("milonga")>-1&&(e.type="milonga"),e.title.toLowerCase().indexOf("workshop")>-1&&(e.type="lesson"),e.title.toLowerCase().indexOf("lesson")>-1&&(e.type="lesson"),e.title.toLowerCase().indexOf("class")>-1&&(e.type="lesson")),e.type||e.description&&(e.description.toLowerCase().indexOf("vals")>-1&&(e.type="vals"),e.description.toLowerCase().indexOf("waltz")>-1&&(e.type="vals"),e.description.toLowerCase().indexOf("milonga")>-1&&(e.type="milonga"),e.description.toLowerCase().indexOf("workshop")>-1&&(e.type="lesson"),e.description.toLowerCase().indexOf("lesson")>-1&&(e.type="lesson"),e.description.toLowerCase().indexOf("class")>-1&&(e.type="lesson")),e.valid=!0,e.dateAdd=this.formatDate(new Date),e}formatDate(l){var e=l.getMonth()+1,n=l.getDate();return[l.getFullYear(),(e>9?"":"0")+e,(n>9?"":"0")+n].join("-")}logOut(){this.authService.logoutUser(),this.profileService.setRole("visitor"),this.router.navigateByUrl("login")}rateTF(){window.open("https://play.google.com/store/apps/details?id=tango.fury")}generateSitemap(){let l=["https://www.tangofury.com/tabs/home","https://www.tangofury.com/tabs/latest","https://www.tangofury.com/tabs/tango-maestros","https://www.tangofury.com/tabs/tango-selections-all"];return this.playlistService.getSelections().then(e=>{e.forEach(e=>{l.push("https://www.tangofury.com/tabs/selection/NbtwzggJpfYmu1rN4lqdCNBBSVu1/"+e.key)})}),this.MaestroService.getMaestros().forEach(e=>{l.push("https://www.tangofury.com/tabs/tango-maestros/"+e.slug)}),l}ngOnInit(){this.sitemap=this.generateSitemap();try{document.querySelector("meta[name='description']").remove()}catch(e){}var l=document.createElement("meta");l.name="description",l.content="Informations about the Tango Fury project",document.getElementsByTagName("head")[0].appendChild(l),this.inscBackAction=this.platform.backButton.subscribe(()=>{this.element=document.getElementById("backButton"),this.element.click()},l=>{console.log("\n\nERROR:\n"+l.message+"\n\n")})}}class b{}var m=n("pMnS"),p=n("oBZk"),v=n("SVse"),f=n("IheW"),y=n("iInd"),g=t.kb({encapsulation:0,styles:[[""]],data:{}});function k(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,14,"ion-card",[],null,null,null,p.U,p.f)),t.lb(1,49152,null,0,d.n,[t.h,t.k],null,null),(l()(),t.mb(2,0,null,0,4,"ion-card-header",[["class","card-menu"]],null,null,null,p.R,p.h)),t.lb(3,49152,null,0,d.p,[t.h,t.k],null,null),(l()(),t.mb(4,0,null,0,1,"ion-icon",[["name","settings"]],null,null,null,p.cb,p.r)),t.lb(5,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,0,[" Parameters "])),(l()(),t.mb(7,0,null,0,7,"ion-card-content",[],null,null,null,p.Q,p.g)),t.lb(8,49152,null,0,d.o,[t.h,t.k],null,null),(l()(),t.mb(9,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Cb(-1,null,["Lougout from Tango Fury ?"])),(l()(),t.mb(11,0,null,0,3,"p",[["class","center"]],null,null,null,null,null)),(l()(),t.mb(12,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.logOut()&&t),t},p.O,p.d)),t.lb(13,49152,null,0,d.l,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Logout "]))],function(l,e){l(e,5,0,"settings")},null)}function w(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,21,"ion-card",[],null,null,null,p.U,p.f)),t.lb(1,49152,null,0,d.n,[t.h,t.k],null,null),(l()(),t.mb(2,0,null,0,4,"ion-card-header",[["class","card-menu"]],null,null,null,p.R,p.h)),t.lb(3,49152,null,0,d.p,[t.h,t.k],null,null),(l()(),t.mb(4,0,null,0,1,"ion-icon",[["name","sync"]],null,null,null,p.cb,p.r)),t.lb(5,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,0,[" Administration "])),(l()(),t.mb(7,0,null,0,14,"ion-card-content",[],null,null,null,p.Q,p.g)),t.lb(8,49152,null,0,d.o,[t.h,t.k],null,null),(l()(),t.mb(9,0,null,0,5,"p",[["class","center"]],null,null,null,null,null)),(l()(),t.mb(10,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.importVideos()&&t),t},p.O,p.d)),t.lb(11,49152,null,0,d.l,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Import "])),(l()(),t.mb(13,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Cb(14,null,["",""])),(l()(),t.mb(15,0,null,0,0,"hr",[],null,null,null,null,null)),(l()(),t.mb(16,0,null,0,5,"p",[["class","center"]],null,null,null,null,null)),(l()(),t.mb(17,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.clearVideos()&&t),t},p.O,p.d)),t.lb(18,49152,null,0,d.l,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Clear multiple items "])),(l()(),t.mb(20,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Cb(21,null,["",""]))],function(l,e){l(e,5,0,"sync")},function(l,e){var n=e.component;l(e,14,0,n.resultImport),l(e,21,0,n.resultClear)})}function V(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Cb(1,null,[" "," "]))],null,function(l,e){l(e,1,0,e.context.$implicit)})}function I(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,10,"ion-card",[],null,null,null,p.U,p.f)),t.lb(1,49152,null,0,d.n,[t.h,t.k],null,null),(l()(),t.mb(2,0,null,0,4,"ion-card-header",[["class","card-menu"]],null,null,null,p.R,p.h)),t.lb(3,49152,null,0,d.p,[t.h,t.k],null,null),(l()(),t.mb(4,0,null,0,1,"ion-icon",[["name","world"]],null,null,null,p.cb,p.r)),t.lb(5,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,0,[" Sitemap "])),(l()(),t.mb(7,0,null,0,3,"ion-card-content",[],null,null,null,p.Q,p.g)),t.lb(8,49152,null,0,d.o,[t.h,t.k],null,null),(l()(),t.eb(16777216,null,0,1,null,V)),t.lb(10,278528,null,0,v.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],function(l,e){var n=e.component;l(e,5,0,"world"),l(e,10,0,n.sitemap)},null)}function C(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,11,"ion-header",[],null,null,null,p.bb,p.q)),t.lb(1,49152,null,0,d.C,[t.h,t.k],null,null),(l()(),t.mb(2,0,null,0,9,"ion-toolbar",[["color","dark"]],null,null,null,p.vb,p.K)),t.lb(3,49152,null,0,d.Cb,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.mb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,p.P,p.e)),t.lb(5,49152,null,0,d.m,[t.h,t.k],null,null),(l()(),t.mb(6,0,null,0,2,"ion-back-button",[["defaultHref","/"],["id","backButton"]],null,[[null,"click"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.wb(l,8).onClick(n)&&u),u},p.M,p.b)),t.lb(7,49152,null,0,d.h,[t.h,t.k],{defaultHref:[0,"defaultHref"]},null),t.lb(8,16384,null,0,d.i,[[2,d.ib],d.Ib],{defaultHref:[0,"defaultHref"]},null),(l()(),t.mb(9,0,null,0,2,"ion-title",[["class","center"]],null,null,null,p.ub,p.J)),t.lb(10,49152,null,0,d.Ab,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,["About"])),(l()(),t.mb(12,0,null,null,43,"ion-content",[["class","fg-content"],["padding",""]],null,null,null,p.X,p.m)),t.lb(13,49152,null,0,d.v,[t.h,t.k],null,null),(l()(),t.mb(14,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),t.Cb(-1,null,["About Tango Fury"])),(l()(),t.mb(16,0,null,0,17,"ion-card",[],null,null,null,p.U,p.f)),t.lb(17,49152,null,0,d.n,[t.h,t.k],null,null),(l()(),t.mb(18,0,null,0,4,"ion-card-header",[["class","card-menu"]],null,null,null,p.R,p.h)),t.lb(19,49152,null,0,d.p,[t.h,t.k],null,null),(l()(),t.mb(20,0,null,0,1,"ion-icon",[["name","heart"]],null,null,null,p.cb,p.r)),t.lb(21,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,0,[" Do you like Tango Fury ? "])),(l()(),t.mb(23,0,null,0,10,"ion-card-content",[],null,null,null,p.Q,p.g)),t.lb(24,49152,null,0,d.o,[t.h,t.k],null,null),(l()(),t.mb(25,0,null,0,4,"p",[],null,null,null,null,null)),(l()(),t.Cb(-1,null,["Give some "])),(l()(),t.mb(27,0,null,null,1,"ion-icon",[["name","star"]],null,null,null,p.cb,p.r)),t.lb(28,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,null,[" to Tango Fury on the Google Play Store ! :) "])),(l()(),t.mb(30,0,null,0,3,"p",[["class","center"]],null,null,null,null,null)),(l()(),t.mb(31,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.rateTF()&&t),t},p.O,p.d)),t.lb(32,49152,null,0,d.l,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Rate Tango Fury "])),(l()(),t.mb(34,0,null,0,15,"ion-card",[],null,null,null,p.U,p.f)),t.lb(35,49152,null,0,d.n,[t.h,t.k],null,null),(l()(),t.mb(36,0,null,0,4,"ion-card-header",[["class","card-menu"]],null,null,null,p.R,p.h)),t.lb(37,49152,null,0,d.p,[t.h,t.k],null,null),(l()(),t.mb(38,0,null,0,1,"ion-icon",[["name","information-circle"]],null,null,null,p.cb,p.r)),t.lb(39,49152,null,0,d.D,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Cb(-1,0,[" About "])),(l()(),t.mb(41,0,null,0,8,"ion-card-content",[],null,null,null,p.Q,p.g)),t.lb(42,49152,null,0,d.o,[t.h,t.k],null,null),(l()(),t.mb(43,0,null,0,4,"p",[],null,null,null,null,null)),(l()(),t.Cb(-1,null,["This app has been backed with love by Fabien Grignoux. If you have any comment or suggestion please email me at fab.grignoux@gmail.com or join me on "])),(l()(),t.mb(45,0,null,null,1,"a",[["href","https://www.facebook.com/fabien.grignoux"]],null,null,null,null,null)),(l()(),t.Cb(-1,null,["Facebook"])),(l()(),t.Cb(-1,null,["."])),(l()(),t.mb(48,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Cb(-1,null,["Hope to see you on the dancefloor ! :)"])),(l()(),t.eb(16777216,null,0,1,null,k)),t.lb(51,16384,null,0,v.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.eb(16777216,null,0,1,null,w)),t.lb(53,16384,null,0,v.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.eb(16777216,null,0,1,null,I)),t.lb(55,16384,null,0,v.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,"dark"),l(e,7,0,"/"),l(e,8,0,"/"),l(e,21,0,"heart"),l(e,28,0,"star"),l(e,39,0,"information-circle"),l(e,51,0,"visitor"!=n.role),l(e,53,0,"admin"==n.role),l(e,55,0,"admin"==n.role)},null)}function S(l){return t.Eb(0,[(l()(),t.mb(0,0,null,null,1,"app-about",[],null,null,null,C,g)),t.lb(1,114688,null,0,h,[i.a,a.a,f.c,u.a,o.a,y.m,d.Kb,s.a],null,null)],function(l,e){l(e,1,0)},null)}var T=t.ib("app-about",h,S,{},{},[]),L=n("s7LF");n.d(e,"AboutPageModuleNgFactory",function(){return O});var O=t.jb(b,[],function(l){return t.tb([t.ub(512,t.j,t.Z,[[8,[m.a,T]],[3,t.j],t.v]),t.ub(4608,v.m,v.l,[t.s,[2,v.v]]),t.ub(4608,L.o,L.o,[]),t.ub(4608,d.c,d.c,[t.x,t.g]),t.ub(4608,d.Hb,d.Hb,[d.c,t.j,t.p,v.c]),t.ub(4608,d.Lb,d.Lb,[d.c,t.j,t.p,v.c]),t.ub(4608,f.h,f.n,[v.c,t.z,f.l]),t.ub(4608,f.o,f.o,[f.h,f.m]),t.ub(5120,f.a,function(l){return[l]},[f.o]),t.ub(4608,f.k,f.k,[]),t.ub(6144,f.i,null,[f.k]),t.ub(4608,f.g,f.g,[f.i]),t.ub(6144,f.b,null,[f.g]),t.ub(4608,f.f,f.j,[f.b,t.p]),t.ub(4608,f.c,f.c,[f.f]),t.ub(1073742336,v.b,v.b,[]),t.ub(1073742336,L.m,L.m,[]),t.ub(1073742336,L.e,L.e,[]),t.ub(1073742336,d.Eb,d.Eb,[]),t.ub(1073742336,f.e,f.e,[]),t.ub(1073742336,f.d,f.d,[]),t.ub(1073742336,y.n,y.n,[[2,y.t],[2,y.m]]),t.ub(1073742336,b,b,[]),t.ub(256,f.l,"XSRF-TOKEN",[]),t.ub(256,f.m,"X-XSRF-TOKEN",[]),t.ub(1024,y.k,function(){return[[{path:"",component:h}]]},[])])})},qyVB:function(l,e,n){"use strict";n.d(e,"a",function(){return r});var t=n("ZZ/e"),u=n("iqUP"),o=n("TpLW"),i=n("Rt4g"),s=n("8Y7J"),a=function(l,e,n,t){return new(n||(n=Promise))(function(u,o){function i(l){try{a(t.next(l))}catch(e){o(e)}}function s(l){try{a(t.throw(l))}catch(e){o(e)}}function a(l){l.done?u(l.value):new n(function(e){e(l.value)}).then(i,s)}a((t=t.apply(l,e||[])).next())})};class r{constructor(l,e,n,t){this.loadingCtrl=l,this.profileService=e,this.maestroService=n,this.platform=t,this.videos=new Array,this.topVideos=[],this.allVideos=[],this.allMilongas=[],this.allVals=[],this.allOthers=[],this.allLessons=[],this.limitOffset=24}launchVideo(l){window.open("https://www.youtube.com/watch?v="+l.youtubeId)}getVideos(l,e="",n=0,t=!1){return new Promise(o=>{if(null==l)if(null==e)if(1==t)var i=u.database().ref("/videos").orderByChild("topVideo").equalTo(1).limitToLast(n+24);else i=u.database().ref("/videos").orderByChild("datePublication").limitToLast(n+24);else i=u.database().ref("/videos").orderByChild("type").equalTo(e).limitToLast(n+24);else i=null==e?u.database().ref("maestros/"+l.key+"/videos").orderByChild("datePublication").limitToLast(n+24):u.database().ref("maestros/"+l.key+"/videos").orderByChild("type").equalTo(e).limitToLast(n+24);var s=this.profileService.getVideosWatched();i.once("value").then(l=>{let e=[];l.forEach(function(l){var n={key:l.key,id:l.child("id").val(),title:l.child("title").val(),youtubeId:l.child("youtubeId").val(),urlImage:l.child("urlImage").val(),datePublication:l.child("datePublication").val(),description:l.child("description").val(),importUser:l.child("importUser").val(),topVideo:l.child("topVideo").val(),type:l.child("type").val(),valid:l.child("valid").val(),dateAdd:l.child("dateAdd").val(),seen:!1};s.indexOf(n.youtubeId)>-1&&(n.seen=!0),n.valid&&e.push(n)}),o(e.length>0?e.reverse():[])})})}loadAllVideos(){return new Promise((l,e)=>{u.database().ref("/videos").orderByChild("datePublication").once("value").then(e=>{let n=[],t=[];e.forEach(function(l){var e={key:l.key,id:l.child("id").val(),title:l.child("title").val(),youtubeId:l.child("youtubeId").val(),urlImage:l.child("urlImage").val(),datePublication:l.child("datePublication").val(),description:l.child("description").val(),importUser:l.child("importUser").val(),topVideo:l.child("topVideo").val(),type:l.child("type").val(),valid:l.child("valid").val(),dateAdd:l.child("dateAdd").val(),seen:!1};e.valid&&(n.push(e),e.topVideo&&t.push(e))}),n.length>0?(this.allVideos=n,this.topVideos=t,this.allVideos.reverse(),l(this.allVideos)):l(null)})})}addToVideos(l){this.allVideos.unshift(l)}setVideos(l){this.allVideos=l;for(let e of this.allVideos)"milonga"==e.type&&this.allMilongas.push(e),"vals"==e.type&&this.allVals.push(e),"other"==e.type&&this.allOthers.push(e),"lesson"==e.type&&this.allLessons.push(e)}getAllVideos(){return this.allVideos}presentLoading(l){return a(this,void 0,void 0,function*(){let e=yield this.loadingCtrl.create({message:l,duration:500});yield e.present()})}getTopvideos(l){return a(this,void 0,void 0,function*(){return 0==this.topVideos.length&&(yield this.getVideos(null,null,0,!0).then(l=>{this.topVideos=l})),this.topVideos})}setTopVideos(l){this.topVideos=l}addTopVideo(l){this.presentLoading("Setting as a top video"),l.topVideo=1,u.database().ref(`/videos/${l.key}`).set(l),this.topVideos.unshift(l)}removeTopVideo(l){l.topVideo=0,u.database().ref(`/videos/${l.key}`).set(l)}playVideo(l){l.seen=!0,this.profileService.setVideoSeen(l),window.open("https://www.youtube.com/watch?v="+l.youtubeId)}setType(l,e){return l.type=e,this.maestroService.getMaestros().forEach(n=>{this.findVideo(l,"maestros/"+n.key+"/videos","setType",e).then()}),this.findVideo(l,"videos","setType",e).then(),!0}deleteVideo(l){this.maestroService.getMaestros().forEach(e=>{this.findVideo(l,"maestros/"+e.key+"/videos","delete",null).then()}),this.deleteGeneralVideo(l)}deleteGeneralVideo(l){u.database().ref("videos/"+l.key).set(null),u.database().ref("/videos-deleted/").push(l.youtubeId)}getDeletedVideos(){return a(this,void 0,void 0,function*(){var l=Array();return(yield u.database().ref("videos-deleted").once("value")).forEach(function(e){l.push(e.val())}),l})}findVideo(l,e,n,t){return new Promise((o,i)=>{u.database().ref(e).orderByChild("youtubeId").equalTo(l.youtubeId).once("value").then(o=>{o.forEach(function(o){"delete"==n&&(l.valid=0,u.database().ref(e+"/"+o.key).set(l)),"setType"==n&&(l.type=t,u.database().ref(e+"/"+o.key).set(l))})})})}}r.ngInjectableDef=s.Q({factory:function(){return new r(s.U(t.Gb),s.U(o.a),s.U(i.a),s.U(t.Kb))},token:r,providedIn:"root"})}}]);